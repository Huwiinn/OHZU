{
  "sourceFile": "pages/post/write.tsx",
  "activeCommit": 0,
  "commits": [
    {
      "activePatchIndex": 5,
      "patches": [
        {
          "date": 1676338844523,
          "content": "Index: \n===================================================================\n--- \n+++ \n"
        },
        {
          "date": 1676338855461,
          "content": "Index: \n===================================================================\n--- \n+++ \n@@ -169,9 +169,10 @@\n           className=\"flex min-h-[200px]\"\n           name=\"text\"\n           value={form.text}\n           onChange={onChangeValue}\n-          placeholder=\"1.asdsdddfgafddfddfdffd 2.fdfddffd\"\n+          placeholder=\"1.asdsdddfgafddfddfdffd 2.fdfddffd 3.sdadsds\n+        \"\n         />\n         <div className=\"w-full flex justify-end items-center\">\n           <button onClick={onSubmit} className=\"bg-white p-2\">\n             작성\n"
        },
        {
          "date": 1676338864070,
          "content": "Index: \n===================================================================\n--- \n+++ \n@@ -169,9 +169,9 @@\n           className=\"flex min-h-[200px]\"\n           name=\"text\"\n           value={form.text}\n           onChange={onChangeValue}\n-          placeholder=\"1.asdsdddfgafddfddfdffd 2.fdfddffd 3.sdadsds\n+          placeholder=\"1.asdsdddfgafddfddfdffd 2.fdfddffd 3.sdadsdsdsdsa\n         \"\n         />\n         <div className=\"w-full flex justify-end items-center\">\n           <button onClick={onSubmit} className=\"bg-white p-2\">\n"
        },
        {
          "date": 1676338884962,
          "content": "Index: \n===================================================================\n--- \n+++ \n@@ -169,9 +169,9 @@\n           className=\"flex min-h-[200px]\"\n           name=\"text\"\n           value={form.text}\n           onChange={onChangeValue}\n-          placeholder=\"1.asdsdddfgafddfddfdffd 2.fdfddffd 3.sdadsdsdsdsa\n+          placeholder=\"1.asdsdddfgafddfddfdffd /n 2.fdfddffd 3.sdadsdsdsdsa\n         \"\n         />\n         <div className=\"w-full flex justify-end items-center\">\n           <button onClick={onSubmit} className=\"bg-white p-2\">\n"
        },
        {
          "date": 1676338897098,
          "content": "Index: \n===================================================================\n--- \n+++ \n@@ -169,9 +169,9 @@\n           className=\"flex min-h-[200px]\"\n           name=\"text\"\n           value={form.text}\n           onChange={onChangeValue}\n-          placeholder=\"1.asdsdddfgafddfddfdffd / 2.fdfddffd 3.sdadsdsdsdsa\n+          placeholder=\"1.asdsdddfgafddfddfdffd 2.fdfddffd n/ 3.sdadsdsdsdsa\n         \"\n         />\n         <div className=\"w-full flex justify-end items-center\">\n           <button onClick={onSubmit} className=\"bg-white p-2\">\n"
        },
        {
          "date": 1676338903800,
          "content": "Index: \n===================================================================\n--- \n+++ \n@@ -169,9 +169,9 @@\n           className=\"flex min-h-[200px]\"\n           name=\"text\"\n           value={form.text}\n           onChange={onChangeValue}\n-          placeholder=\"1.asdsdddfgafddfddfdffd 2.fdfddffd / 3.sdadsdsdsdsa\n+          placeholder=\"1.asdsdddfgafddfddfdffd 2.fdfddffd  3.sdadsdsdsdsa\n         \"\n         />\n         <div className=\"w-full flex justify-end items-center\">\n           <button onClick={onSubmit} className=\"bg-white p-2\">\n"
        }
      ],
      "date": 1676338844523,
      "name": "Commit-0",
      "content": "import React, { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { useState } from \"react\";\nimport { dbService, storageService } from \"@/firebase\";\nimport { getDownloadURL, ref, uploadString } from \"firebase/storage\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { doc, setDoc, addDoc, collection } from \"firebase/firestore\";\nimport { AiFillCamera } from \"react-icons/ai\";\nimport { AiOutlineClose } from \"react-icons/ai\";\n\nconst Post = () => {\n  const [form, setForm] = useState<Form>({\n    userId: \"\",\n    img: \"\",\n    title: \"\",\n    type: \"\",\n    ingredient: \"\",\n    recipe: \"\",\n    text: \"\",\n    like: [],\n    liked: [],\n    view: 0,\n  });\n  const [imgFile, setImgFile] = useState<File | null>();\n  const [preview, setPreview] = useState<string | null>(\"\");\n\n  const onChangeValue = (\n    event:\n      | React.ChangeEvent<HTMLInputElement>\n      | React.ChangeEvent<HTMLTextAreaElement>\n  ) => {\n    const { name, value } = event.target;\n    setForm((prev) => {\n      return { ...prev, [name]: value };\n    });\n  };\n  const onChangeImg = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files !== null) {\n      const file = event.target.files[0];\n      if (file && file.type.substring(0, 5) === \"image\") {\n        setImgFile(file);\n      }\n      // else {\n      //   setImgFile(null);\n      // }\n    }\n  };\n  const onClickCancelImg = () => {\n    setImgFile(null);\n  };\n\n  const onSubmit = async (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    let imgFileUrl = \"\";\n    if (preview !== \"\") {\n      const previewRef = ref(storageService, `user/${uuidv4()}`);\n      await uploadString(previewRef, preview as string, \"data_url\");\n      imgFileUrl = await getDownloadURL(previewRef);\n      setForm((prev) => {\n        return { ...prev, img: imgFileUrl };\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (imgFile) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreview(reader.result as string);\n      };\n      reader.readAsDataURL(imgFile);\n    } else {\n      setPreview(null);\n    }\n  }, [imgFile]);\n\n  return (\n    <Layout>\n      <form className=\"flex flex-col justify-center items-center bg-slate-400 p-5\">\n        <div className=\"w-full h-[200px] bg-slate-100 flex justify-center items-center overflow-hidden\">\n          {preview === null ? (\n            <label className=\"w-[50px] h-[50px] bg-slate-200 flex justify-center items-center absolute\">\n              <input\n                name=\"img\"\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={onChangeImg}\n                className=\"hidden\"\n              />\n              <AiFillCamera className=\"scale-[2] text-slate-400 hover:scale-[2.2]\" />\n            </label>\n          ) : (\n            <label className=\"w-full h-[200px] bg-transparent flex justify-end p-5 pr-9 items-start absolute\">\n              <AiOutlineClose\n                onClick={onClickCancelImg}\n                className=\" text-black p-[2px] bg-white rounded-full hover:scale-[2.2] box-border\"\n              />\n            </label>\n          )}\n          <img ={preview as string} className=\" object-cover\" />\n        </div>\n\n        <div className=\"mt-3 bg-slate-300 w-full\">\n          <div>제목</div>\n          <input name=\"title\" value={form.title} onChange={onChangeValue} />\n        </div>\n\n        <div className=\"flex bg-slate-300 mt-2 p-2 w-[90%] justify-around\">\n          <label className=\"w-[60px] h-[50px] p-1 bg-slate-300\">\n            <input\n              type=\"radio\"\n              name=\"type\"\n              value=\"소주\"\n              onChange={onChangeValue}\n              className=\"hidden peer\"\n            />\n            <span className=\"w-full h-full bg-white rounded-md flex items-center justify-center text-center peer-checked:bg-slate-500 peer-checked:rounded-md\">\n              소주\n            </span>\n          </label>\n          <label className=\"w-[60px] h-[50px] p-1 bg-slate-300\">\n            <input\n              type=\"radio\"\n              name=\"type\"\n              value=\"맥주\"\n              onChange={onChangeValue}\n              className=\"hidden peer\"\n            />\n            <span className=\"w-full h-full bg-white rounded-md flex items-center justify-center text-center peer-checked:bg-slate-500 peer-checked:rounded-md\">\n              맥주\n            </span>\n          </label>\n          <label className=\"w-[60px] h-[50px] p-1 bg-slate-300\">\n            <input\n              type=\"radio\"\n              name=\"type\"\n              value=\"양주\"\n              onChange={onChangeValue}\n              className=\"hidden peer\"\n            />\n            <span className=\"w-full h-full bg-white rounded-md flex items-center justify-center text-center peer-checked:bg-slate-500 peer-checked:rounded-md\">\n              양주\n            </span>\n          </label>\n          <label className=\"w-[60px] h-[50px] p-1 bg-slate-300\">\n            <input\n              type=\"radio\"\n              name=\"type\"\n              value=\"Etc\"\n              onChange={onChangeValue}\n              className=\"hidden peer\"\n            />\n            <span className=\"w-full h-full bg-white rounded-md flex items-center justify-center text-center peer-checked:bg-slate-500 peer-checked:rounded-md\">\n              Etc\n            </span>\n          </label>\n        </div>\n\n        <div>재료</div>\n        <textarea\n          name=\"ingredient\"\n          value={form.ingredient}\n          onChange={onChangeValue}\n        />\n        <div>만드는 방법</div>\n        <textarea name=\"recipe\" value={form.recipe} onChange={onChangeValue} />\n        <div>내용</div>\n        <textarea\n          className=\"flex min-h-[200px]\"\n          name=\"text\"\n          value={form.text}\n          onChange={onChangeValue}\n          placeholder=\"1.asdsdddfgafddfddfdffd 2.fdfddffd\"\n        />\n        <div className=\"w-full flex justify-end items-center\">\n          <button onClick={onSubmit} className=\"bg-white p-2\">\n            작성\n          </button>\n        </div>\n      </form>\n    </Layout>\n  );\n};\n\nexport default Post;\n"
    }
  ]
}
